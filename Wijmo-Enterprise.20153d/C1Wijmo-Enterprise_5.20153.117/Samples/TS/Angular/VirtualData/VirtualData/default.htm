<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Virtual Data</title>

    <!-- Angular/Bootstrap -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />

    <!-- Wijmo -->
    <script src="scripts/vendor/wijmo.min.js" type="text/javascript"></script>
    <script src="scripts/vendor/wijmo.grid.min.js" type="text/javascript"></script>
    <script src="scripts/vendor/wijmo.input.min.js" type="text/javascript"></script>
    <script src="scripts/vendor/wijmo.grid.filter.min.js" type="text/javascript"></script>
    <script src="scripts/vendor/wijmo.odata.min.js" type="text/javascript"></script>
    <link href="styles/vendor/wijmo.min.css" rel="stylesheet" />

    <!-- Wijmo-Angular interop -->
    <script src="scripts/vendor/wijmo.angular.min.js" type="text/javascript"></script>

    <!-- app scripts/styles -->
    <script src="scripts/app.js" type="text/javascript"></script>
    <script src="scripts/controllers/appCtrl.js" type="text/javascript"></script>
    <link href="styles/app.css" rel="stylesheet" />
</head>

<body ng-app="app" ng-controller="appCtrl">
    <div class="container">

        <h1>ODataCollectionView and ODataVirtualCollectionView</h1>
        <p>
            The <b>ODataCollectionView</b> class provides a simple way to connect controls
            to OData sources. When you create an <b>ODataCollectionView</b>, it starts loading
            all the data in the source, given the filtering and paging constraints.</p>
        <p>
            The <b>wijmo.odata.ODataVirtualCollectionView</b> extends <b>ODataCollectionView</b> to
            provide on-demand loading of data. The <b>wijmo.odata.ODataVirtualCollectionView</b> 
            does not automatically load the data from the server. Instead, it relies on the 
            <b>setWindow</b> method to load data fragments (windows) on demand.</p>
        <p>
            The grids below show how both classes work. Notice how the grid on the left shows
            the data being loaded gradually. The grid on the right shows the full record count
            immediately, but the data will not be loaded until you scroll down.</p>
        <div class="row">
            <div class="col-md-6">
                <h3>
                    ODataCollectionView</h3>
                <wj-flex-grid 
                    control="flexCV"
                    is-read-only="true"
                    initialized="initODataCollectionView(s,e)">
                    <wj-flex-grid-column binding="OrderID" header="Order"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="ProductID" header="Product"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="ProductName" header="Name"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="UnitPrice" header="Unit Price" format="n2"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="Quantity" header="Quantity"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="Discount" header="Discount" format="p0"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="ExtendedPrice" header="Price" format="n2"></wj-flex-grid-column>
                </wj-flex-grid>
                <b>ODataCollectionView</b>: {{flexCV.itemsSource.items.length | number}} items
            </div>
            <div class="col-md-6">
                <h3>
                    ODataVirtualCollectionView</h3>
                <wj-flex-grid 
                    control="flexVCV"
                    is-read-only="true"
                    initialized="initODataVirtualCollectionView(s,e)">
                    <wj-flex-grid-column binding="OrderID" header="Order"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="ProductID" header="Product"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="ProductName" header="Name"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="UnitPrice" header="Unit Price" format="n2"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="Quantity" header="Quantity"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="Discount" header="Discount" format="p0"></wj-flex-grid-column>
                    <wj-flex-grid-column binding="ExtendedPrice" header="Price" format="n2"></wj-flex-grid-column>
                </wj-flex-grid>
                <b>ODataVirtualCollectionView</b>: {{flexVCV.itemsSource.items.length | number}} items
            </div>
        </div>
    </div>
</body>
</html>
